% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bcf_linear_probit.R
\name{bcf_linear_probit}
\alias{bcf_linear_probit}
\title{Run the Bayesian Causal Forest (BCF) algorithm with Linear/Probit extensions}
\usage{
bcf_linear_probit(
  X_train,
  Z_train,
  y_train,
  propensity_train = NULL,
  rfx_group_ids_train = NULL,
  rfx_basis_train = NULL,
  X_test = NULL,
  Z_test = NULL,
  propensity_test = NULL,
  rfx_group_ids_test = NULL,
  rfx_basis_test = NULL,
  num_gfr = 5,
  num_burnin = 0,
  num_mcmc = 100,
  previous_model_json = NULL,
  previous_model_warmstart_sample_num = NULL,
  general_params = list(),
  prognostic_forest_params = list(),
  treatment_effect_forest_params = list(),
  variance_forest_params = list()
)
}
\arguments{
\item{X_train}{Covariates used to split trees in the ensemble. May be provided either as a dataframe or a matrix.
Matrix covariates will be assumed to be all numeric. Covariates passed as a dataframe will be
preprocessed based on the variable types.}

\item{Z_train}{Vector of (continuous or binary) treatment assignments.}

\item{y_train}{Outcome to be modeled by the ensemble.}

\item{propensity_train}{(Optional) Vector of propensity scores. If not provided, this will be estimated from the data.}

\item{rfx_group_ids_train}{(Optional) Group labels used for an additive random effects model.}

\item{rfx_basis_train}{(Optional) Basis for "random-slope" regression in an additive random effects model.
If \code{rfx_group_ids_train} is provided with a regression basis, an intercept-only random effects model
will be estimated.}

\item{X_test}{(Optional) Test set of covariates used to define "out of sample" evaluation data.
May be provided either as a dataframe or a matrix, but the format of \code{X_test} must be consistent with
that of \code{X_train}.}

\item{Z_test}{(Optional) Test set of (continuous or binary) treatment assignments.}

\item{propensity_test}{(Optional) Vector of propensity scores. If not provided, this will be estimated from the data.}

\item{rfx_group_ids_test}{(Optional) Test set group labels used for an additive random effects model.}

\item{rfx_basis_test}{(Optional) Test set basis for "random-slope" regression in additive random effects model.}

\item{num_gfr}{Number of "warm-start" iterations run using the grow-from-root algorithm. Default: 5.}

\item{num_burnin}{Number of "burn-in" iterations of the MCMC sampler. Default: 0.}

\item{num_mcmc}{Number of "retained" iterations of the MCMC sampler. Default: 100.}

\item{previous_model_json}{(Optional) JSON string containing a previous BCF model. This can be used to "continue" a sampler interactively. Default: \code{NULL}.}

\item{previous_model_warmstart_sample_num}{(Optional) Sample number from \code{previous_model_json} that will be used to warmstart this BCF sampler. Default: \code{NULL}.}

\item{general_params}{(Optional) A list of general (non-forest-specific) model parameters. Key options include:
\itemize{
\item \code{use_ncp}: Boolean. If \code{TRUE}, uses Non-Centered Parameterization for the linear sampler (recommended for stability).
\item \code{interaction_rule}: String. Defines how interactions are created (e.g., "continuous", "continuous_or_binary").
\item \code{regularize_ATE}: Boolean. If \code{TRUE}, the ATE (intercept) is subject to shrinkage.
\item \code{sample_global_prior}: String. Prior for global shrinkage parameter (e.g., "half-cauchy", "half-normal").
\item \code{unlink}: Boolean. If \code{TRUE}, decouples interaction shrinkage from main effects.
\item \code{probit_outcome_model}: Boolean. If \code{TRUE}, assumes binary outcome with probit link.
\item \code{standardize}: Boolean. Whether to standardize the outcome. Default \code{TRUE}.
}}

\item{prognostic_forest_params}{(Optional) A list of prognostic forest model parameters (e.g., \code{num_trees}, \code{alpha}, \code{beta}).}

\item{treatment_effect_forest_params}{(Optional) A list of treatment effect forest model parameters.}

\item{variance_forest_params}{(Optional) A list of variance forest model parameters (for heteroskedasticity).}
}
\value{
A list of class \code{bcfmodel} containing sampling outputs (forests, coefficients, residuals) and model metadata.
}
\description{
This function implements a hybrid Bayesian Causal Forest model that combines
non-parametric tree ensembles with linear outcome modeling. It supports
continuous and binary (probit) outcomes, linear interaction terms with
horseshoe regularization, and random effects.
}
